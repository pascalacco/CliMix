before_script:
  - ls
  - whoami
deploy_stage:
    stage: deploy
    environment: Staging
    script:
      - pwd
      - rm -rf .git/
      - rm flaskapp/app.wsgi
      - rm flaskapp/static/logo.png
      - mv flaskapp/static/logoTest.png flaskapp/static/logo.png
      - cp -r . /var/www/climix-test/
      - cd /var/www/climix-test/
      - source venv/bin/activate
      - pip install -r requirements.txt
      - pip install -r notebooks_requirements.txt
      - pip install -e .

deploy_production:
  stage: deploy
  environment: Production
  only:
    - tags
  script:
      - pwd
      - rm -rf .git/
      - rm flaskapp/app.wsgi
      - cp -r . /var/www/climix/

